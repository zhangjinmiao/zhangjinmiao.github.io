<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>List 源码解析之 LinkedList 源码分析 &mdash; 山川尽美</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/pastie.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="http://zhangjinmiao.github.io/sourcecode/2019/03/19/LinkedList.html"><link rel="alternate" type="application/atom+xml" title="山川尽美" href="http://zhangjinmiao.github.io"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/favicon.ico"><meta property="og:title" content="List 源码解析之 LinkedList 源码分析"><meta name="keywords" content="List, LinkedList, 源码"><meta name="og:keywords" content="List, LinkedList, 源码"><meta name="description" content="注：文中源码为 JDK 1.8 。"><meta name="og:description" content="注：文中源码为 JDK 1.8 。"><meta property="og:url" content="http://zhangjinmiao.github.io/sourcecode/2019/03/19/LinkedList.html"><meta property="og:site_name" content="山川尽美"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2019-03-19"> <script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/js/main.js"></script> <script data-ad-client="ca-pub-7093222719567591" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="http://zhangjinmiao.github.io/" title="山川尽美"><span class="octicon octicon-mark-github"></span> 山川尽美</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="http://zhangjinmiao.github.io/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="http://zhangjinmiao.github.io/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="http://zhangjinmiao.github.io/archives/" class=" site-header-nav-item" target="" title="归档">归档</a> <a href="http://zhangjinmiao.github.io/spring-boot.html" class=" site-header-nav-item" target="_blank" title="Spring Boot">Spring Boot</a> <a href="http://zhangjinmiao.github.io/payment.html" class=" site-header-nav-item" target="_blank" title="支付">支付</a> <a href="http://zhangjinmiao.github.io/about.html" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="List 源码解析之 Link"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">List 源码解析之 LinkedList 源码分析</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2019/03/19 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="http://zhangjinmiao.github.io/categories/#SourceCode" title="SourceCode">SourceCode</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 3776 字，约 11 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"> <img style="height:72px;width:72px" src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/images/qrcode.jpg" alt="山川尽美" /></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths"><article class="article-content markdown-body"><p>注：文中源码为 JDK 1.8 。</p><h3 id="linkedlist-简介">LinkedList 简介</h3><p>实现了 List 和 Deque 接口，既可以看作一个顺序容器，又可以看作一个队列（<em>Queue</em>），同时又可以看作一个栈（<em>Stack</em>）（处理栈和队列问题，首选 ArrayDeque，它的性能比 LinkedList 作栈和队列使用好很多）。 LinkedList 是一种双向链表，通过<code class="language-plaintext highlighter-rouge">first</code>和<code class="language-plaintext highlighter-rouge">last</code>引用分别指向链表的第一个和最后一个元素。 LinkedList 是非线程安全的，也就是说它不是同步的，适合单线程环境使用；需要多个线程并发访问，可以先采用<code class="language-plaintext highlighter-rouge">Collections.synchronizedList()</code>方法对其进行包装。 LinkedList 实现了 Serializable 接口，因此它支持序列化，能够通过序列化传输，实现了 Cloneable 接口，能被克隆。</p><h3 id="属性和构造函数">属性和构造函数</h3><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">transient</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>    <span class="c1">//数量    </span>
<span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">first</span><span class="o">;</span>   <span class="c1">//首节点    </span>
<span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">last</span><span class="o">;</span>    <span class="c1">//尾节点</span>

<span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="no">E</span> <span class="n">item</span><span class="o">;</span>
  <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
  <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">;</span>

  <span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="cm">/**
 * Constructs an empty list.
 */</span>
<span class="kd">public</span> <span class="nf">LinkedList</span><span class="o">()</span> <span class="o">{</span>
<span class="o">}</span>

<span class="cm">/**
 * 构造一个包含指定collection 的元素的列表，这些元素按照
 * 该collection 的迭代器返回它们的顺序排列的
 */</span>
<span class="kd">public</span> <span class="nf">LinkedList</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">();</span>
  <span class="n">addAll</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><h3 id="存储">存储</h3><h4 id="setint-index-e-element">set(int index, E element)</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 用指定的元素替代此列表中指定位置上的元素，并返回以前位于该位置上的元素  </span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">set</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">checkElementIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
  <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
  <span class="no">E</span> <span class="n">oldVal</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
  <span class="n">x</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
  <span class="k">return</span> <span class="n">oldVal</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="adde-e">add(E e)</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 添加指定元素到链表尾部，花费时间为常数时间</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">add</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">linkLast</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
  <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**
 * Links e as last element.
 链接e作为最后一个元素，默认向表尾节点加入新的元素
 */</span>
<span class="kt">void</span> <span class="nf">linkLast</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">l</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span> <span class="c1">// 当插入数据量大时，生成对象比较耗时</span>
  <span class="n">last</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="k">else</span>
    <span class="n">l</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="n">size</span><span class="o">++;</span>
  <span class="n">modCount</span><span class="o">++;</span>
<span class="o">}</span>
</code></pre></div></div><h3 id="addint-index-e-element">add(int index, E element)</h3><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 在指定位置插入</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">checkPositionIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span>
      <span class="n">linkLast</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
  <span class="k">else</span>
      <span class="nf">linkBefore</span><span class="o">(</span><span class="n">element</span><span class="o">,</span> <span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">));</span>
<span class="o">}</span>

<span class="c1">// 下标位置越界检查</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">checkPositionIndex</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">isPositionIndex</span><span class="o">(</span><span class="n">index</span><span class="o">))</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfBoundsException</span><span class="o">(</span><span class="n">outOfBoundsMsg</span><span class="o">(</span><span class="n">index</span><span class="o">));</span>
<span class="o">}</span>

<span class="cm">/**
  * Inserts element e before non-null Node succ.
  */</span>
<span class="kt">void</span> <span class="nf">linkBefore</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">succ</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// assert succ != null;</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">pred</span> <span class="o">=</span> <span class="n">succ</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">pred</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">succ</span><span class="o">);</span>
  <span class="n">succ</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">pred</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="k">else</span>
    <span class="n">pred</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
  <span class="n">size</span><span class="o">++;</span>
  <span class="n">modCount</span><span class="o">++;</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="addallcollection-extends-e-c">addAll(Collection&lt;? extends E&gt; c)</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 按照指定collection 的迭代器所返回的元素顺序，将该collection 中的所有元素添加到此列表的尾部</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addAll</span><span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nf">addAll</span><span class="o">(</span><span class="n">size</span><span class="o">,</span> <span class="n">c</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// 具体看源码吧</span>
</code></pre></div></div><h3 id="读取">读取</h3><h4 id="getint-index">get(int index)</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 返回指定下标的元素</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">checkElementIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
  <span class="k">return</span> <span class="nf">node</span><span class="o">(</span><span class="n">index</span><span class="o">).</span><span class="na">item</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><h3 id="删除">删除</h3><p>1.先找到要删除元素的引用，2.修改相关引用，完成删除操作</p><h4 id="removeint-index">remove(int index)</h4><p>使用下标计数</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 删除指定位置的元素，并返回</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">checkElementIndex</span><span class="o">(</span><span class="n">index</span><span class="o">);</span> <span class="c1">// 检查下标是否越界</span>
  <span class="k">return</span> <span class="nf">unlink</span><span class="o">(</span><span class="n">node</span><span class="o">(</span><span class="n">index</span><span class="o">));</span>
<span class="o">}</span>

<span class="cm">/**
  * Unlinks non-null node x.
  */</span>
<span class="no">E</span> <span class="nf">unlink</span><span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// assert x != null;</span>
  <span class="kd">final</span> <span class="no">E</span> <span class="n">element</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">prev</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//删除的是第一个元素</span>
      <span class="n">first</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">prev</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
      <span class="n">x</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//删除的是最后一个元素</span>
      <span class="n">last</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
      <span class="n">x</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">x</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//let GC work</span>
  <span class="n">size</span><span class="o">--;</span>
  <span class="n">modCount</span><span class="o">++;</span>
  <span class="k">return</span> <span class="n">element</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="removeobject-o">remove(Object o)</h4><p>使用 equales 方法</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 删除指定元素</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">remove</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">item</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">unlink</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">unlink</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p>增删元素的时候，只需改变指针，不需要像数组那样对整体数据进行移动、复制等消耗性能的操作。</p><h3 id="遍历">遍历</h3><p>遍历的时候耗时，for 循环(无穷大) &gt; ForEach &gt; 迭代器，优先使用迭代器方式。</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="o">(</span><span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();){}</span>
</code></pre></div></div><h3 id="队列操作">队列操作</h3><h4 id="e-peek">E peek()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 获取第一个元素</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">peek</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">f</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">f</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div><h4 id="e-peekfirst">E peekFirst()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 获取第一个元素，同E peek() </span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">peekFirst</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">f</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">f</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
     <span class="o">}</span>
</code></pre></div></div><h4 id="e-peeklast">E peekLast()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 获取最后一个元素</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">peekLast</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
  <span class="k">return</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">l</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="e-pop">E pop()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 移除第一个元素并返回</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">pop</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nf">removeFirst</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="e-pollfirst">E pollFirst()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 移除第一个元素，同E pop()</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">pollFirst</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
  <span class="k">return</span> <span class="o">(</span><span class="n">f</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">unlinkFirst</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="e-polllast">E pollLast()</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 移除最后一个元素</span>
<span class="kd">public</span> <span class="no">E</span> <span class="nf">pollLast</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
  <span class="k">return</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="n">unlinkLast</span><span class="o">(</span><span class="n">l</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><h4 id="pushe-e">push(E e)</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 队首添加一个元素</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">addFirst</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><h3 id="总结">总结</h3><ol><li>基于双向循环链表实现，不存在容量不足的问题，没有扩容的方法</li><li>增删元素快，查找慢</li><li>元素排列有序，可重复，可为 null</li><li>实现了栈和队列的操作方法，因此也可以作为栈、队列和双端队列来使用。</li><li>非同步，线程不安全</li></ol><h3 id="参考">参考</h3><blockquote><ul><li><a href="https://github.com/pzxwhc/MineKnowContainer/issues/18">pzxwhc</a></li><li><a href="http://blog.csdn.net/ns_code/article/details/35787253">兰亭风雨</a></li><li><a href="https://github.com/CarpenterLee/JCFInternals/blob/master/markdown/3-LinkedList.md">JCFInternals</a></li></ul></blockquote><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="http://zhangjinmiao.github.io" target="_blank">Zhang jinmiao</a></li><li>本文链接：<a href="http://zhangjinmiao.github.io/sourcecode/2019/03/19/LinkedList.html" target="_blank">http://zhangjinmiao.github.io/sourcecode/2019/03/19/LinkedList.html</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"><div class="share-component" data-disabled='qq,facebook'></div></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/sourcecode/2019/03/19/LinkedList.html', clientID: 'e5745b9f2c046ee0c357', clientSecret: '65a695b992dc36811f6cf752593994ffbb1316c6', repo: 'blog-comments', owner: 'zhangjinmiao', admin: ['zhangjinmiao'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@built/assets/search_data.json?v=1660463943', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Zhang jinmiao">Zhang jinmiao</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/zhangjinmiao/zhangjinmiao.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="http://zhangjinmiao.github.io/links.html" title="链接" target="_blank">链接</a></li><li> <a href="http://zhangjinmiao.github.io/used-urls.html" title="网址" target="_blank">网址</a></li><li> <a href="http://zhangjinmiao.github.io/money.html" title="挣钱" target="_blank">挣钱</a></li><li> <a href="http://zhangjinmiao.github.io/todo.html" title="TODO" target="_blank">TODO</a></li><li> <a href="http://zhangjinmiao.github.io/open-source.html" title="Code" target="_blank">Code</a></li><li><a href="http://zhangjinmiao.github.io"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div><div class="site-footer" role="contentinfo" style="padding-top:0px;border-top:none;"><div style="text-align:center;"> <a target="_blank" style="color:#777" href="http://beian.miit.gov.cn/">晋ICP备19009201号-1</a></div><div style="text-align:center"> <img src="http://zhangjinmiao.github.io/assets/images/2019/备案图标.png"> <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802029536" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">京公网安备 11010802029536号</p></a></div><div class="mobile-hidden" style="text-align:center;" > <span id="busuanzi_container_site_pv">本站总访问量:<span id="busuanzi_value_site_pv"></span>次/</span> <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人/</span> <span id="busuanzi_container_page_pv">本页访问量<span id="busuanzi_value_page_pv"></span>次/</span> 统计始于2018-03-12 <span id="htmer_time"></span></div><script async src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script> <script language=JavaScript> function secondToDate(second) { if (!second) { return 0; } var time = new Array(0, 0, 0, 0, 0); if (second >= 365 * 24 * 3600) { time[0] = parseInt(second / (365 * 24 * 3600)); second %= 365 * 24 * 3600; } if (second >= 24 * 3600) { time[1] = parseInt(second / (24 * 3600)); second %= 24 * 3600; } if (second >= 3600) { time[2] = parseInt(second / 3600); second %= 3600; } if (second >= 60) { time[3] = parseInt(second / 60); second %= 60; } if (second > 0) { time[4] = second; } return time; } </script> <script type="text/javascript" language="javascript"> function setTime() { var create_time = Math.round(new Date(Date.UTC(2018, 3, 12, 0, 0, 0)).getTime() / 1000); var timestamp = Math.round((new Date().getTime() + 8 * 60 * 60 * 1000) / 1000); currentTime = secondToDate((timestamp - create_time)); currentTimeHtml = '默默运行了' + currentTime[0] + '年' + currentTime[1] + '天' + currentTime[2] + '时' + currentTime[3] + '分' + currentTime[4] + '秒'; document.getElementById("htmer_time").innerHTML = currentTimeHtml; } setInterval(setTime, 1000); </script></div></footer><script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/zhangjinmiao/zhangjinmiao.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
